# cheerup-FE

## ğŸ“• ê°œìš”

- ëª…ì¹­ : cheerup
- ê°œë°œ ì¸ì› : 5ëª…
  - Front end: **ë…¸ì˜ˆì°¬, ë°•ê²½ì¤€**
  - Back end: **ë°•ì‘ìˆ˜, ê¹€ì„ ìš©, ì´ì¤‘ì›**
- ê°œë°œ ê¸°ê°„ : 2021.07.09 ~ 2021.07.15
- ì£¼ìš” ê¸°ëŠ¥
  - ìœ ì €ê°€ ê³ ë¯¼ì„ ì ìœ¼ë©´ ëœë¤ìœ¼ë¡œ ê³ ë¯¼ì— ëŒ€í•œ í•´ê²°ì±…ì„ ì œì‹œí•´ì¤Œ. (ë§ˆë²•ì˜ ê³ ë¯¼í•´ê²°ì±… ì»¨ì…‰ ì°¨ìš©)
  - ê²Œì‹œê¸€ê³¼ ëŒ“ê¸€ì— ëŒ€í•œ CRUD
  - JWTë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸
- ê°œë°œ ì–¸ì–´ : JavaScript,
- ê°œë°œ ë¼ì´ë¸ŒëŸ¬ë¦¬ : React.js
- í˜•ìƒ ê´€ë¦¬ íˆ´ : git
- í˜‘ì—… íˆ´ : [notion](https://www.notion.so/22-1fc891afa24f457aac4aac2cb320a79f)
- ê°„ë‹¨ ì†Œê°œ : ë¦¬ì•¡íŠ¸ - ìŠ¤í”„ë§ ê²Œì‹œíŒ ê¸°ëŠ¥ì„ í†µí•œ ê³ ë¯¼í•´ê²° ì‚¬ì´íŠ¸.

## â˜ğŸ» í”„ë¡œì íŠ¸ íŠ¹ì§•

- í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œë¥¼ ë¶„ë¦¬í•˜ì—¬ í”„ë¡œì íŠ¸ ê°œë°œ

  - ê° íŒŒíŠ¸ë³„ë¡œ Repositoryë¥¼ ìƒì„± í›„ ì‘ì—…
  - í”„ë¡ íŠ¸: AWS S3
  - ë°±ì—”ë“œ: AWS EC2
  - ë¹Œë“œ í›„, S3ì™€ EC2ë¥¼ ì—°ë™
    - API ëª…ì„¸ì„œì— ë”°ë¼ APIí˜¸ì¶œ ë° ì‘ë‹µ í™•ì¸
  - ë¡œê·¸ì¸ ì‹œ JWT, ì¿ í‚¤ ì‚¬ìš©
  - material-uië¥¼ ì´ìš©í•´ ë ˆì´ì•„ì›ƒ êµ¬í˜„

## ğŸ’» ì‚¬ìš© íŒ¨í‚¤ì§€

* **reduxjs/toolkit**
  - ë°ì´í„° ì „ì—­ ê´€ë¦¬ë¥¼ ìœ„í•œ ë¦¬ë•ìŠ¤ ê´€ë¦¬ íŒ¨í‚¤ì§€
* **styled-components**
  - ì»´í¬ë„ŒíŠ¸ì˜ ìŠ¤íƒ€ì¼ì„ ì„¤ì •í•˜ëŠ” íŒ¨í‚¤ì§€
* **axios**
  - ì„œë²„ í†µì‹ ì„ ìœ„í•œ íŒ¨í‚¤ì§€
* **connected-react-router, history**
  - ë¼ìš°íŒ… ë° í˜ì´ì§€ ì´ë™ì„ ìœ„í•œ íŒ¨í‚¤ì§€
* **swiper**
  - ìŠ¬ë¼ì´ë”ë¥¼ êµ¬í˜„í•˜ëŠ” íŒ¨í‚¤ì§€
* **universal-cookie**
  - ì¿ í‚¤ crud ê´€ë ¨ ë™ì‘ì„ ìœ„í•œ íŒ¨í‚¤ì§€
* **jwt-decode**
  - í† í°ì˜ payload ë‚´ìš©ì„ ë””ì½”ë”©í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€
* **material-ui**
  - UI Framework íŒ¨í‚¤ì§€

## ğŸš€ í•µì‹¬ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### ì†ŒíŒ…ë°©ì‹ ì „í™˜ ì‹œ ìŠ¤ì™€ì´í¼ ìœ„ì¹˜ê°€ ê·¸ëŒ€ë¡œ ìœ ì§€ë¨.
- ì†ŒíŒ…ë°©ì‹ì„ ë°”ê¾¸ë©´ ê°€ì¥ ì²« ì¹´ë“œë¡œ ìŠ¤ì™€ì´í¼ê°€ ëŒì•„ê°€ì•¼ UX ì ìœ¼ë¡œ ë°”ëŒì§.
- querySelectorë¡œ ë…¸ë“œë¥¼ ê°€ì ¸ì˜¤ë ¤ê³ í• ë•Œ ë¬¸ì œê°€ ìˆì—ˆìŒ.
- useEffect()ë¡œ ë Œë”ë§ ì´í›„ ë…¸ë“œ í• ë‹¹
- ì†ŒíŒ… ë²„íŠ¼ì—ì„œ ìƒì„±ëœ swiper ê°ì²´ì— slide ìœ„ì¹˜ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜ onClickì— ì¶”ê°€

- ìŠ¤ì™€ì´í¼ ë…¸ë“œ ì •ì˜ ë° swiper stateì— í• ë‹¹
```jsx
const [swiper, setSwiper] = useState(null);
useEffect(() => {
  const swiperInstance = document.querySelector(".swiper-container").swiper;
  setSwiper(swiperInstance);
}, []);
```

- ì†ŒíŒ… ë²„íŠ¼ í´ë¦­ ì‹œ slide ì´ˆê¸°í™”

```jsx
<MenuItem value="" onClick={() => swiper.slideTo(0, 250, false)}>
  ë“±ë¡ì¼ ìˆœ
</MenuItem>
```

### card onClick ì´ë²¤íŠ¸ ë²„ë¸”ë§
- ì¹´ë“œ ìœ„ì— absolute positionìœ¼ë¡œ ë“¤ì–´ê°„ ë²„íŠ¼ì„ ëˆŒë €ì„ë•Œ, ì¹´ë“œ í´ë¦­ë„ ë°œìƒë˜ì–´ ë””í…Œì¼ í˜ì´ì§€ë¡œ ë„˜ì–´ê°.
- z-indexë¥¼ í™œìš©í•´ë„ ë¬¸ì œ ì¬í˜„
- stopPropagation()ìœ¼ë¡œ ì´ë²¤íŠ¸ ì „ë‹¬ ë°©ì§€
- touchstart ì´ë²¤íŠ¸ ì œì–´ë¥¼ ìœ„í•´ì„œ ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©

```jsx
<IconButton
  size="small"
  aria-label="like"
  style={{
    backgroundColor: "#fff",
    padding: "8px",
    position: "absolute",
    top: "3px",
    right: "5px",
    border: "1px solid #0B184E",
  }}
  onClick={(e) => {
    dispatch(listActions.likeSV(user_name, l.id));
    e.stopPropagation();
  }}
>
```

### article ëª¨ë“ˆì˜ loadArticleSVì— ì¸ìê°€ ì œëŒ€ë¡œ ë“¤ì–´ê°€ì§€ ì•ŠìŒ
- apië¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¬ë•Œë§ˆë‹¤ usernameìœ¼ë¡œ ì‹ë³„í•˜ì—¬ ë³€ê²½ë˜ì–´ì•¼ í•˜ëŠ” ê°’ì´ ê°±ì‹ ë˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ë°˜í™˜ë¨ (likeItChecker state)
- .get(`/article?username=${user_name}`) api í˜¸ì¶œ ì‹œ username íŒŒë¼ë¯¸í„°ì— ê°’ì´ ì•ˆë“¤ì–´ê°€ëŠ”ê²ƒìœ¼ë¡œ í™•ì¸.

```jsx
const loadArticleSV = (user_name, id) => {
  return function (dispatch, getState, { history }) {
    instance
      .get(`/article?username=${user_name}`)
      .then((res) => {
        if (id) {
          const article = res.data.filter((l, idx) => {
            return l.id === parseInt(id);
          });
          dispatch(loadArticle(article));
        } else {
          dispatch(loadArticle(res.data));
        }
      })
      .catch((err) => {
        console.log("list load error!", err);
      });
  };
};
```

- dispatchë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ê³¼ì •ì—ì„œ argë¡œ ì“°ì¸ user_name stateê°€ ì œëŒ€ë¡œ ê°±ì‹ ë˜ê¸° ì „ì— ë“¤ì–´ê°€ë²„ë¦¼.
- useEffectì—ì„œ user_nameì´ ë³€ê²½ë˜ë©´ dispatch ë˜ë„ë¡ ìˆ˜ì •.

```jsx
const user_name = useSelector((state) => state.user.user_name);

...

useEffect(() => {
  dispatch(listActions.loadArticleSV(user_name));
}, [user_name]);
```

### ë¡œê·¸ì¸ ì´ì „ì— ì ì—ˆë˜ ê¸€ì´ ë‚¨ì•„ìˆë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŒ 
- ìƒˆë¡œê³ ì¹¨ì´ ë  ë•Œë§ˆë‹¤, loginCheckí•¨ìˆ˜ê°€ ì‹¤í–‰ë¨
- loginCheckí•¨ìˆ˜ì—ì„œ ì¿ í‚¤ë¥¼ í†µí•´ ë¡œê·¸ì¸ì´ í™•ì¸ì´ ë˜ë©´, ë‹¤ì‹œ ë¡œê·¸ì¸ ë¦¬ë“€ì„œë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í–ˆì—ˆê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ë˜ì—ˆìŒ.
- loginCheckí•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ ë¡œê·¸ì¸ ë¦¬ë“€ì„œë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹Œ, ë¡œê·¸ì¸ ì—¬ë¶€ë§Œ í™•ì¸í•˜ëŠ” ë¦¬ë“€ì„œë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì„œ ì‹¤í–‰í•¨.

```jsx
const CHECK_LOGIN = "CHECK_LOGIN";

...

const checkLogin = createAction(CHECK_LOGIN, (user_name) => ({ user_name }));

...

const loginCheckCK = () => {
  return (dispatch, getState, { history }) => {
    const token = cookies.get("refresh_token");
    const decoded = jwt_decode(token);
    dispatch(checkLogin(decoded.sub));
  };
};

...

[CHECK_LOGIN]: (state, action) =>
      produce(state, (draft) => {
        draft.user_name = action.payload.user_name;
        draft.is_login = true;
      }),
```
